--*------------------------------------------------------------------------------------*--
--Creator: Rob
--Date: 03-12-2019
--Last update: xx-xx-xxxx
--Changelog:
--Source: -
--Description: Used to Switch off lights in the living room when time is after 22.00 hour.
--*------------------------------------------------------------------------------------*--

return {
    on = {
        devices = {
            92 -- Xiaomi mini switch
        }
    },

--Voeg logging toe voor dit script  
   logging = {
   level = domoticz.LOG_INFO,
   marker = "Lampen uit na 22:00"
   },
   
    execute = function(domoticz, device)
        --Declarations
        local Time          = require('Time')       --Time function
        local CurrentTime   = Time()                --Current time
        local Knop          = domoticz.devices(92)  -- Xiaomi Mini Switch
        
        --Function
        if (CurrentTime.matchesRule('at 22:00-06:00')) then 
            if Knop.state == 'Double Click' then 
            domoticz.devices(188).switchOff().checkFirst()                --Lampen boven eettafel
            domoticz.devices(185).switchOff().afterSec(10).checkFirst()   --Lampen boven bank
            domoticz.devices(51).switchOff().afterSec(15).checkFirst()    --Lamp naast televisie
            domoticz.devices(179).switchOff().afterSec(20).checkFirst()   --Lamp boven dressoir
            domoticz.log('De lampen zijn uitgeschakeld')
       end
end
end
}
